@GetMapping("/uploads/{filename:.+}")
public ResponseEntity<Resource> serveFile(@PathVariable String filename) throws MalformedURLException {
    Path file = Paths.get("uploads").resolve(filename).normalize();
    Resource resource = new UrlResource(file.toUri());

    if (!resource.exists()) {
        throw new RuntimeException("File not found: " + filename);
    }

    return ResponseEntity.ok()
            .contentType(MediaTypeFactory.getMediaType(resource).orElse(MediaType.APPLICATION_OCTET_STREAM))
            .body(resource);
}