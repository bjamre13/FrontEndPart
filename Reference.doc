import React from 'react';
import './CustomerDashboard.css';

type TicketStatus = 'Open' | 'In Progress' | 'Resolved' | 'Closed';
type Priority = 'High' | 'Medium' | 'Low';

interface User {
  id: string;
  name: string;
}

interface Ticket {
  id: string;
  title: string;
  status: TicketStatus;
  date: string;
  priority: Priority;
  createdBy: User;
}

export default function CustomerDashboard() {
  const user: User | null = { id: 'customer001', name: 'Alice Smith' };

  const tickets: Ticket[] = [
    { id: '#1245', title: 'Login issue with mobile app', status: 'In Progress', date: 'Mar 10, 2025', priority: 'High', createdBy: user },
    { id: '#1244', title: 'Billing discrepancy', status: 'Resolved', date: 'Mar 9, 2025', priority: 'Medium', createdBy: user },
    { id: '#1243', title: 'Feature request: Dark mode', status: 'Resolved', date: 'Mar 8, 2025', priority: 'Low', createdBy: user }
  ];

  const active = tickets.filter(t => t.status === 'Open' || t.status === 'In Progress').length;
  const resolved = tickets.filter(t => t.status === 'Resolved').length;
  const urgent = tickets.filter(t => t.priority === 'High').length;

  return (
    <div className="customer-dashboard">
      <header className="nav-bar">
        <h1>Support Ticket System</h1>
        <nav>
          <a href="/">Dashboard</a>
          <a href="/">Notifications</a>
          <a href="/">Profile</a>
        </nav>
      </header>

      <div className="dashboard-content">
        <aside className="sidebar">
          <h2>My Tickets</h2>
          <ul>
            <li><a href="#">All Tickets</a></li>
            <li><a href="#">Active Tickets</a></li>
            <li><a href="#">Resolved Tickets</a></li>
            <li><a href="#">Create New Ticket</a></li>
          </ul>
        </aside>

        <main className="main-section">
          <section className="summary">
            <h2>Ticket Summary</h2>
            <div className="summary-buttons">
              <button className="btn blue">{active} Active</button>
              <button className="btn green">{resolved} Resolved</button>
              <button className="btn red">{urgent} Urgent</button>
            </div>
          </section>

          <section className="ticket-table">
            <div className="table-header">
              <h2>Recent Tickets</h2>
              <a href="/tickets/new" className="btn green">+ New Ticket</a>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Title</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Priority</th>
                </tr>
              </thead>
              <tbody>
                {tickets.map(ticket => (
                  <tr key={ticket.id}>
                    <td>{ticket.id}</td>
                    <td>{ticket.title}</td>
                    <td><span className={`status ${ticket.status.toLowerCase().replace(/\s/g, '-')}`}>{ticket.status}</span></td>
                    <td>{ticket.date}</td>
                    <td><span className={`priority ${ticket.priority.toLowerCase()}`}>{ticket.priority}</span></td>
                  </tr>
                ))}
              </tbody>
            </table>
          </section>
        </main>
      </div>
    </div>
  );
}




body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  overflow-x: hidden;
}

.customer-dashboard {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.nav-bar {
  background: #0044aa;
  color: white;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav-bar nav a {
  color: white;
  margin-left: 20px;
  text-decoration: none;
}

.dashboard-content {
  display: flex;
  height: 100%;
}

.sidebar {
  width: 200px;
  background-color: #f4f4f4;
  padding: 1rem;
  border-right: 1px solid #ddd;
}

.sidebar ul {
  list-style: none;
  padding: 0;
}

.sidebar li a {
  display: block;
  padding: 8px 0;
  color: #333;
  text-decoration: none;
}

.sidebar li a:hover {
  text-decoration: underline;
}

.main-section {
  flex: 1;
  padding: 2rem;
  overflow-y: auto;
}

.summary-buttons {
  display: flex;
  gap: 10px;
  margin: 1rem 0;
}

.btn {
  padding: 0.5rem 1rem;
  border: none;
  font-weight: bold;
  border-radius: 4px;
  color: white;
  cursor: pointer;
}

.btn.green { background-color: #28a745; }
.btn.red { background-color: #dc3545; }
.btn.blue { background-color: #007bff; }

.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}

th, td {
  padding: 0.75rem;
  border: 1px solid #ddd;
  text-align: left;
}

.status.in-progress {
  background-color: #007bff;
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
}

.status.resolved {
  background-color: #28a745;
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
}

.priority.high {
  color: #dc3545;
  font-weight: bold;
}

.priority.medium {
  color: #ffc107;
  font-weight: bold;
}

.priority.low {
  color: #28a745;
  font-weight: bold;
}